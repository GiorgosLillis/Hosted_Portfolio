let List=document.getElementById("displayList"),list_items=List.children,itemInput=document.getElementById("item"),quantityInput=document.getElementById("quantity"),unitInput=document.getElementById("unit"),categoryInput=document.getElementById("category"),filterCategoryBtn=document.getElementById("filterCategory"),filterNameBtn=document.getElementById("filterName"),joinfilterBtn=document.getElementById("filterAll"),successMessage=document.getElementById("successMessage"),errorMessage=document.getElementById("errorMessage"),fileInfo=document.getElementById("fileInfo"),submitBtn=document.getElementById("submitBtn"),resetBtn=document.getElementById("resetBtn"),downloadBtn=document.getElementById("downloadBtn"),uploadBtn=document.getElementById("uploadBtn");function inputValidation(e,t,n,a){if(a.textContent="",e.length<2)return a.textContent="Write an item.",!1;if(!/[a-zA-Z]/.test(e))return a.textContent="Item has no letters.",!1;if(/(.)\1{3,}/.test(e))return a.textContent="Item has too many repeating characters.",!1;let i=parseFloat(t);return isNaN(i)||i<=0?(a.textContent="Quantity must be a positive number.",!1):n.length<1?(a.textContent="Select a unit.",!1):/[a-zA-Z]/.test(n)?!/(.)\1{3,}/.test(n)||(a.textContent="Unit has too many repeating characters.",!1):(a.textContent="Unit has no letters.",!1)}function clearMessages(){errorMessage.textContent="",fileInfo.textContent="",fileInfo.className=""}function saveList(e){e.preventDefault(),clearMessages();let t=itemInput.value.trim(),n=quantityInput.value.trim(),a=unitInput.value.trim(),i=categoryInput.value.trim()||"Other";if(!inputValidation(t,n,a,errorMessage))return void itemInput.focus();let r=Array.from(list_items),s=t.toUpperCase();if(r.some(e=>e.dataset.item===s)){errorMessage.textContent="Item already exists in the list",itemInput.value="",itemInput.focus();return}let o=document.createElement("li");o.className="list-group-item fs-5 mb-3 rounded-3",o.dataset.item=s,o.dataset.originalItem=t,o.dataset.quantity=n,o.dataset.unit=a,o.dataset.category=i,List.append(o),updateItemNumbers(),itemInput.value="",quantityInput.value="",unitInput.value="",window.innerWidth>=768&&itemInput.focus()}function updateItemNumbers(){for(let e=0;e<list_items.length;e++){let t=list_items[e],n=t.dataset.originalItem,a=t.dataset.quantity,i=t.dataset.unit,r=t.dataset.category||"Other",s=t.dataset.checked,o=`${r}: ${n} ${a}${i}`.trim();t.innerHTML=`
      ${e+1}) ${o};
    `,t.draggable="true";let l=createBtn();t.appendChild(l);let d=document.createElement("input");d.type="checkbox",d.id="gotItem"+(e+1),d.className="form-check-input mx-2 float-end",d.checked="true"===s,d.onclick=function(t){return this.parentElement.dataset.checked=this.checked,this.parentElement.ariaLabel=`${e+1}. Category: ${r} Item:${n}, Quantity: ${a}${i}, checkbox: ${this.checked?"checked":"not checked"}`},t.appendChild(d),t.ariaLabel=`${e+1}. Category: ${r} Item:${n}, Quantity: ${a}${i}, checkbox: ${d.checked?"checked":"not checked"}`,addDragAndDropListeners(t)}}function createBtn(){let e=document.createElement("button");return e.innerHTML='<i class="bi bi-trash"></i>',e.className="btn btn-danger btn-sm float-end ms-2",e.onclick=function(){this.parentElement.remove(),clearMessages(),updateItemNumbers()},e}function resetList(){clearMessages(),List.innerHTML="",document.getElementById("errorMessage").textContent="",document.getElementById("item").value="",document.getElementById("quantity").value="",document.getElementById("unit").value="",document.getElementById("item").focus()}function verify(){if(clearMessages(),0===list_items.length){errorMessage.textContent="List is empty. Please add items before downloading.";return}let e=document.getElementById("downloadBtn");e.id="confirmDownloadBtn",e.textContent="Confirm Download",e.removeEventListener("click",verify),e.addEventListener("click",downloadList)}function downloadList(){let e=Array.from(list_items);if(clearMessages(),0===list_items.length)errorMessage.textContent="List is empty. Please add items before downloading.";else{let t=new Blob([e.map(e=>{let t=e.dataset.originalItem,n=e.dataset.quantity,a=e.dataset.unit;return`${t} ${n}${a}`.trim()}).filter(e=>""!==e).join("\n")],{type:"text/plain"}),n=URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="list.txt",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n)}let t=document.getElementById("confirmDownloadBtn");t.removeEventListener("click",downloadList),t.id="downloadBtn",t.textContent="Download List",t.addEventListener("click",verify)}async function uploadList(e){e.preventDefault(),errorMessage.textContent="";try{let e=await showFileExplorer({accept:".txt",multiple:!1});e&&e.length>0?await processUploadedFile(e[0]):errorMessage.textContent="No file selected"}catch(e){errorMessage.textContent=`Error: ${e.message}`}}function showFileExplorer(e){return new Promise((t,n)=>{let a=document.createElement("input");a.type="file",a.accept=e.accept||"",a.multiple=e.multiple||!1,a.onchange=()=>{a.files.length>0?t(Array.from(a.files)):n(Error("No files selected"))},a.onerror=()=>{n(Error("Error opening file explorer"))},a.click()})}async function processUploadedFile(e){if(resetList(),errorMessage.textContent="",!e||"text/plain"!==e.type){errorMessage.textContent="Please upload a valid text file";return}fileInfo.textContent="",fileInfo.className="alert alert-info fs-5",fileInfo.innerHTML=`<strong>Selected file:</strong> ${e.name}`,fileInfo.innerHTML+=`<br><strong>File size:</strong> ${formatFileSize(e.size)}`;try{let t=(await readFileAsText(e)).split("\n").filter(e=>e.trim());if(0===t.length){errorMessage.textContent="File is empty or contains no valid items";return}let n=document.getElementById("displayList");t.forEach(e=>{let t=document.createElement("li");t.className="list-group-item fs-5 mb-3 rounded-3";let a=e.trim().match(/^([A-Za-z\s]+)\s*(\d+(\.\d+)?)\s*([A-Za-z]+)?$/i);if(a){let e=a[1].trim(),n=a[2]||"",i=a[4]||"";t.dataset.item=e.toUpperCase(),t.dataset.originalItem=e,t.dataset.quantity=n,t.dataset.unit=i,t.textContent=`${category} ${e} ${n}${i}`.trim()}else{errorMessage.textContent=`Invalid format in line: "${e}". Expected format: "ITEM QUANTITYUNIT"`;return}n.append(t)}),updateItemNumbers(),fileInfo.innerHTML=`<strong>Selected file:</strong> ${e.name} (Loaded)`}catch(e){errorMessage.textContent=`Error reading file: ${e.message}`}}function readFileAsText(e){return new Promise((t,n)=>{let a=new FileReader;a.onload=e=>t(e.target.result),a.onerror=e=>n(e),a.readAsText(e)})}function formatFileSize(e){if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]}function filterListByCategory(){let e=categoryInput.value,t=Array.from(list_items);t.forEach(e=>{e.style.display=""}),""!==e&&(t.forEach(t=>{t.dataset.category===e?t.style.display="":t.style.display="none"}),successMessage.textContent="Items within this category!")}function filterListByName(){let e=Array.from(list_items),t=itemInput.value.trim();successMessage.textContent="",e.forEach(e=>{e.style.display=""}),""!==t&&(e.forEach(e=>{let n=t.toUpperCase();e.dataset.item===n?e.style.display="":e.style.display="none"}),successMessage.textContent="Items with this name!")}function joinFilter(){let e=Array.from(list_items),t=categoryInput.value,n=itemInput.value.trim();e.forEach(e=>{e.style.display=""}),""!==n&&""!==t&&(e.forEach(e=>{let a=n.toUpperCase(),i=e.dataset.category;e.dataset.item===a&&i===t?e.style.display="":e.style.display="none"}),successMessage.textContent="Items that match all filters!")}submitBtn.addEventListener("click",saveList),resetBtn.addEventListener("click",resetList),downloadBtn.addEventListener("click",verify),uploadBtn.addEventListener("click",uploadList),filterCategoryBtn.addEventListener("click",filterListByCategory),filterNameBtn.addEventListener("click",filterListByName),joinfilterBtn.addEventListener("click",joinFilter);
//# sourceMappingURL=list.d519b3fa.js.map
