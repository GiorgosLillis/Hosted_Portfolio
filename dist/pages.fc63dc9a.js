function sanitizeInput(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").trim()}let form=document.getElementById("contactForm");function showToast(e,t,s,a){a.textContent=e;let n=s._element.querySelector(".toast-header");n.className="toast-header",a.className="toast-body","success"===t?n.classList.add("bg-success","text-white"):n.classList.add("bg-danger","text-white"),s.show()}form.addEventListener("submit",async function(e){e.preventDefault();let t=document.getElementById("formToast"),s=t.querySelector(".toast-body"),a=new bootstrap.Toast(t);if(!this.checkValidity())return void this.classList.add("was-validated");if("undefined"==typeof grecaptcha)return void console.error("reCAPTCHA not loaded");let n=await grecaptcha.execute("6Lc560ErAAAAAP7bly7AL_F_5AxlDf8zW7xxbML6",{action:"submit"});if(!n)return void showToast("reCAPTCHA token missing","danger",a,s);let r={email:sanitizeInput(document.getElementById("email").value),subject:sanitizeInput(document.getElementById("subject").value),message:sanitizeInput(document.getElementById("message").value),"g-recaptcha-response":n};r.email&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||errors.push("Please enter a valid email address"),(!r.subject||r.subject.trim().length<1||r.subject.length>100)&&errors.push("Subject must be between 1-100 characters"),(!r.message||r.message.trim().length<1||r.message.length>1e3)&&errors.push("Message must be between 1-1000 characters");let o=document.getElementById("Email-Submit"),i=o.innerHTML;o.innerHTML='<div class="status"><span class="spinner-border" role="status" aria-hidden="true"></span> Sending...</div>',o.disabled=!0;try{let e=await fetch("/api/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),t=await e.json();e.ok?(showToast(t.message||"Message sent successfully!","success",a,s),form.reset()):showToast(t.message||"Failed to send message.","danger",a,s)}catch(e){console.error(e),showToast("Network error. Please try again later.","danger",a,s)}finally{o.innerHTML=i,o.disabled=!1,form.classList.remove("was-validated")}});
//# sourceMappingURL=pages.fc63dc9a.js.map
